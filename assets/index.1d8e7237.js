var p=Object.defineProperty;var b=(o,e,i)=>e in o?p(o,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):o[e]=i;var n=(o,e,i)=>(b(o,typeof e!="symbol"?e+"":e,i),i);import{P as c,p as k}from"./vendor.19870be5.js";const g=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const h of a.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&t(h)}).observe(document,{childList:!0,subtree:!0});function i(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(s){if(s.ep)return;s.ep=!0;const a=i(s);fetch(s.href,a)}};g();var d=(o=>(o.Preloader="preloader",o.Game="game",o.GameOver="game-over",o))(d||{}),r=(o=>(o.Background="background",o.RocketMouse="rocket-mouse",o.MouseHole="mouse-hole",o.Window1="window-1",o.Window2="window-2",o.Bookcase1="bookcase-1",o.Bookcase2="bookcase-2",o.LaserEnd="laser-end",o.LaserMiddle="laser-middle",o.Coin="coin",o))(r||{}),l=(o=>(o.RocketMouseRun="rocket-mouse-run",o.RocketFlamesOn="rocket-flames-on",o.RocketMouseFall="rocket-mouse-fall",o.RocketMouseFly="rocket-mouse-fly",o.RocketMouseDead="rocket-mouse-dead",o))(l||{});class f extends c.GameObjects.Container{constructor(e,i,t){super(e,i,t);n(this,"mouseState",0);n(this,"flames");n(this,"cursors");n(this,"mouse");this.mouse=e.add.sprite(0,0,r.RocketMouse).setOrigin(.5,1).play(l.RocketMouseRun),this.flames=e.add.sprite(-63,-15,r.RocketMouse).play(l.RocketFlamesOn),this.enableJetpack(!1),this.add(this.flames),this.add(this.mouse),e.physics.add.existing(this);const s=this.body;s.setSize(this.mouse.width*.5,this.mouse.height*.7),s.setOffset(this.mouse.width*-.3,-this.mouse.height+15),this.cursors=e.input.keyboard.createCursorKeys()}preUpdate(){const e=this.body;switch(this.mouseState){case 0:this.cursors.space.isDown?(e.setAccelerationY(-600),this.enableJetpack(!0),this.mouse.play(l.RocketMouseFly,!0)):(e.setAccelerationY(0),this.enableJetpack(!1)),e.blocked.down?this.mouse.play(l.RocketMouseRun,!0):e.velocity.y>0&&this.mouse.play(l.RocketMouseFall,!0);break;case 1:{e.velocity.x*=.99,e.velocity.x<=5&&(this.mouseState=2);break}case 2:{if(this.scene.scene.isActive(d.GameOver))break;e.setVelocity(0,0),this.scene.scene.run(d.GameOver);break}}}enableJetpack(e){this.flames.setVisible(e)}kill(){if(this.mouseState!==0)return;this.mouseState=1,this.mouse.play(l.RocketMouseDead);const e=this.body;e.setAccelerationY(0),e.setVelocity(1e3,0),this.enableJetpack(!1)}}class y extends c.GameObjects.Container{constructor(e,i,t){super(e,i,t);const s=e.add.image(0,0,r.LaserEnd).setOrigin(.5,0),a=e.add.image(0,s.y+s.displayHeight,r.LaserMiddle).setOrigin(.5,0);a.setDisplaySize(a.width,200);const h=e.add.image(0,a.y+a.displayHeight,r.LaserEnd).setOrigin(.5,0).setFlipY(!0);this.add(s),this.add(a),this.add(h),e.physics.add.existing(this,!0);const u=this.body,m=s.displayWidth,w=s.displayHeight+a.displayHeight+h.displayHeight;u.setSize(m,w),u.setOffset(-m*.5,0),u.position.x=this.x+u.offset.x,u.position.y=this.y}}class M extends c.Scene{constructor(){super(d.Game);n(this,"background");n(this,"mouseHole");n(this,"window1");n(this,"window2");n(this,"bookcase1");n(this,"bookcase2");n(this,"windows",[]);n(this,"bookcases",[]);n(this,"laserObstacle");n(this,"coins");n(this,"scoreLablel");n(this,"score",0)}init(){this.score=0}create(){const e=this.scale.width,i=this.scale.height;this.background=this.add.tileSprite(0,0,e,i,r.Background).setOrigin(0,0).setScrollFactor(0,0),this.mouseHole=this.add.image(c.Math.Between(900,1500),501,r.MouseHole),this.window1=this.add.image(c.Math.Between(900,1300),200,r.Window1),this.window2=this.add.image(c.Math.Between(1600,2e3),200,r.Window2),this.windows=[this.window1,this.window2],this.bookcase1=this.add.image(c.Math.Between(2200,2700),580,r.Bookcase1).setOrigin(.5,1),this.bookcase2=this.add.image(c.Math.Between(2900,3400),580,r.Bookcase2).setOrigin(.5,1),this.bookcases=[this.bookcase1,this.bookcase2],this.laserObstacle=new y(this,900,100),this.add.existing(this.laserObstacle),this.coins=this.physics.add.staticGroup(),this.spwanCoins();const t=new f(this,e*.5,i-30);this.add.existing(t);const s=t.body;s.setCollideWorldBounds(!0),s.setVelocityX(200),this.physics.world.setBounds(0,0,Number.MAX_SAFE_INTEGER,i-55),this.cameras.main.startFollow(t),this.cameras.main.setBounds(0,0,Number.MAX_SAFE_INTEGER,i),this.physics.add.overlap(this.laserObstacle,t,this.handleOverlapLaser,void 0,this),this.physics.add.overlap(this.coins,t,this.handleCollectCoin,void 0,this),this.scoreLablel=this.add.text(10,10,`Score: ${this.score}`,{fontSize:"24px",color:"#080808",backgroundColor:"#f8e71c",shadow:{fill:!0,blur:0,offsetY:0},padding:{left:15,right:15,top:10,bottom:10}}).setScrollFactor(0)}update(){this.wrapMouseHole(),this.wrapWindows(),this.wrapBookCases(),this.wrapLaserObstacle();//! scroll the background
this.background.setTilePosition(this.cameras.main.scrollX)}wrapMouseHole(){const e=this.cameras.main.scrollX,i=e+this.scale.width;this.mouseHole.x+this.mouseHole.width<e&&(this.mouseHole.x=c.Math.Between(i+100,i+1e3))}wrapWindows(){const e=this.cameras.main.scrollX,i=e+this.scale.width;let t=this.window1.width*2;if(this.window1.x+t<e){this.window1.x=c.Math.Between(i+t,i+t+800);const s=this.bookcases.find(a=>Math.abs(this.window1.x-a.x)<=this.window1.width);this.window1.visible=!s}if(t=this.window2.width,this.window2.x+t<e){this.window2.x=c.Math.Between(this.window1.x+t,this.window1.x+t+800);const s=this.bookcases.find(a=>Math.abs(this.window2.x-a.x)<=this.window2.width);this.window2.visible=!s}}wrapBookCases(){const e=this.cameras.main.scrollX,i=e+this.scale.width;let t=this.bookcase1.width*2;if(this.bookcase1.x+t<e){this.bookcase1.x=c.Math.Between(i+t,i+t+800);const s=this.windows.find(a=>Math.abs(this.bookcase1.x-a.x)<=a.width);this.bookcase1.visible=!s}if(t=this.bookcase2.width,this.bookcase2.x+t<e){this.bookcase2.x=c.Math.Between(this.bookcase1.x+t,this.bookcase1.x+t+800);const s=this.windows.find(a=>Math.abs(this.bookcase2.x-a.x)<=a.width);this.bookcase2.visible=!s,this.spwanCoins()}}wrapLaserObstacle(){const e=this.cameras.main.scrollX,i=e+this.scale.width,t=this.laserObstacle.body,s=t.width;this.laserObstacle.x+s<e&&(this.laserObstacle.x=c.Math.Between(i+s,i+s+1e3),this.laserObstacle.y=c.Math.Between(0,300),t.position.x=this.laserObstacle.x+t.offset.x,t.position.y=this.laserObstacle.y)}handleOverlapLaser(e,i){console.log("overlap!"),i.kill()}spwanCoins(){this.coins.children.each(a=>{const h=a;this.coins.killAndHide(h),h.body.enable=!1});let t=this.cameras.main.scrollX+this.scale.width+100;const s=c.Math.Between(1,20);for(let a=0;a<s;a++){const h=this.coins.get(t,c.Math.Between(100,this.scale.height-100),r.Coin);h.setVisible(!0),h.setActive(!0);const u=h.body;u.setCircle(u.width*.5),u.enable=!0,u.updateFromGameObject(),t+=h.width*1.5}}handleCollectCoin(e,i){const t=i;this.coins.killAndHide(t),t.body.enable=!1,this.score+=1,this.scoreLablel.text=`Score: ${this.score}`}}class x extends k.exports.Scene{constructor(){super(d.Preloader)}preload(){this.load.image(r.Background,"/house/bg_repeat_340x640.png"),this.load.image(r.MouseHole,"../../house/object_mousehole.png"),this.load.image(r.Window1,"../../house/object_window1.png"),this.load.image(r.Window2,"../../house/object_window2.png"),this.load.image(r.Bookcase1,"../../house/object_bookcase1.png"),this.load.image(r.Bookcase2,"../../house/object_bookcase2.png"),this.load.image(r.LaserEnd,"../../house/object_laser_end.png"),this.load.image(r.LaserMiddle,"../../house/object_laser.png"),this.load.image(r.Coin,"../../house/object_coin.png"),this.load.atlas(r.RocketMouse,"../../characters/rocket-mouse.png","../../characters/rocket-mouse.json")}create(){this.anims.create({key:l.RocketMouseRun,frames:this.anims.generateFrameNames(r.RocketMouse,{start:1,end:4,prefix:"rocketmouse_run",zeroPad:2,suffix:".png"}),frameRate:10,repeat:-1}),this.anims.create({key:l.RocketMouseFall,frames:[{key:r.RocketMouse,frame:"rocketmouse_fall01.png"}]}),this.anims.create({key:l.RocketMouseFly,frames:[{key:r.RocketMouse,frame:"rocketmouse_fly01.png"}]}),this.anims.create({key:l.RocketFlamesOn,frames:this.anims.generateFrameNames(r.RocketMouse,{start:1,end:2,prefix:"flame",suffix:".png"}),frameRate:10,repeat:-1}),this.scene.start(d.Game),this.anims.create({key:l.RocketMouseDead,frames:this.anims.generateFrameNames(r.RocketMouse,{start:1,end:2,prefix:"rocketmouse_dead",zeroPad:2,suffix:".png"}),frameRate:10,repeat:-1}),this.scene.start(d.Game)}}class O extends c.Scene{constructor(){super(d.GameOver)}create(){const{width:e,height:i}=this.scale,t=e*.5,s=i*.5;this.add.text(t,s,"Press SPACE to Play Again",{fontSize:"32px",color:"#FFFFFF",backgroundColor:"#000000",shadow:{fill:!0,blur:0,offsetY:0},padding:{left:15,right:15,top:10,bottom:10}}).setOrigin(.5),this.input.keyboard.once("keydown-SPACE",()=>{this.scene.stop(d.GameOver),this.scene.stop(d.Game),this.scene.start(d.Game)})}}const R={type:c.AUTO,width:800,height:640,physics:{default:"arcade",arcade:{gravity:{y:200}}},scene:[x,M,O]};new c.Game(R);
